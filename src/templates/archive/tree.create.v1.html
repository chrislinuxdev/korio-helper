<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collapsible Tree Structure</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        
        .tree-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-width: 800px;
        }
        
        .tree {
            list-style: none;
            padding-left: 0;
            margin: 0;
        }
        
        .tree ul {
            list-style: none;
            padding-left: 20px;
            margin: 0;
        }
        
        .tree-node {
            margin: 5px 0;
        }
        
        .tree-item {
            display: flex;
            align-items: center;
            padding: 5px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .tree-item:hover {
            background-color: #f0f0f0;
        }
        
        .tree-toggle {
            width: 20px;
            height: 20px;
            margin-right: 5px;
            background: none;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #666;
        }
        
        .tree-toggle:before {
            content: "â–¶";
            transition: transform 0.2s;
        }
        
        .tree-toggle.expanded:before {
            transform: rotate(90deg);
        }
        
        .tree-toggle.leaf {
            visibility: hidden;
        }
        
        .tree-label {
            flex: 1;
            padding: 2px 4px;
        }
        
        .tree-children {
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        
        .tree-children.collapsed {
            max-height: 0;
        }
        
        .tree-children.expanded {
            max-height: 1000px;
        }
        
        .folder {
            color: #2196F3;
            font-weight: bold;
        }
        
        .file {
            color: #4CAF50;
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
    <h1>Collapsible Tree Structure</h1>
    <div class="tree-container">
        <ul class="tree" id="treeRoot"></ul>
    </div>

    <script>
        // Hard-coded JSON data
        const treeData = {
            name: "Root Folder",
            type: "folder",
            children: [
                {
                    name: "Documents",
                    type: "folder",
                    children: [
                        {
                            name: "Projects",
                            type: "folder",
                            children: [
                                { name: "project1.txt", type: "file" },
                                { name: "project2.docx", type: "file" },
                                {
                                    name: "Archive",
                                    type: "folder",
                                    children: [
                                        { name: "old_project.zip", type: "file" },
                                        { name: "backup.tar", type: "file" }
                                    ]
                                }
                            ]
                        },
                        { name: "resume.pdf", type: "file" },
                        { name: "notes.txt", type: "file" }
                    ]
                },
                {
                    name: "Pictures",
                    type: "folder",
                    children: [
                        { name: "vacation.jpg", type: "file" },
                        { name: "family.png", type: "file" },
                        {
                            name: "Screenshots",
                            type: "folder",
                            children: [
                                { name: "screen1.png", type: "file" },
                                { name: "screen2.jpg", type: "file" }
                            ]
                        }
                    ]
                },
                {
                    name: "Music",
                    type: "folder",
                    children: [
                        { name: "song1.mp3", type: "file" },
                        { name: "song2.wav", type: "file" },
                        {
                            name: "Playlists",
                            type: "folder",
                            children: [
                                { name: "rock.m3u", type: "file" },
                                { name: "jazz.m3u", type: "file" }
                            ]
                        }
                    ]
                },
                { name: "readme.txt", type: "file" },
                { name: "config.json", type: "file" }
            ]
        };

        class TreeRenderer {
            constructor(container, data) {
                this.container = container;
                this.data = data;
                this.render();
            }

            render() {
                this.container.innerHTML = '';
                const rootElement = this.createTreeNode(this.data);
                this.container.appendChild(rootElement);
            }

            createTreeNode(node) {
                const li = document.createElement('li');
                li.className = 'tree-node';

                const itemDiv = document.createElement('div');
                itemDiv.className = 'tree-item';

                const hasChildren = node.children && node.children.length > 0;
                
                // Create toggle button
                const toggleBtn = document.createElement('button');
                toggleBtn.className = `tree-toggle ${hasChildren ? '' : 'leaf'}`;
                
                if (hasChildren) {
                    toggleBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.toggleNode(toggleBtn, childrenContainer);
                    });
                }

                // Create label
                const label = document.createElement('span');
                label.className = `tree-label ${node.type}`;
                label.textContent = node.name;

                itemDiv.appendChild(toggleBtn);
                itemDiv.appendChild(label);
                li.appendChild(itemDiv);

                // Create children container
                if (hasChildren) {
                    const childrenContainer = document.createElement('ul');
                    childrenContainer.className = 'tree-children collapsed';

                    node.children.forEach(child => {
                        const childElement = this.createTreeNode(child);
                        childrenContainer.appendChild(childElement);
                    });

                    li.appendChild(childrenContainer);
                }

                return li;
            }

            toggleNode(toggleBtn, childrenContainer) {
                const isExpanded = toggleBtn.classList.contains('expanded');
                
                if (isExpanded) {
                    toggleBtn.classList.remove('expanded');
                    childrenContainer.classList.remove('expanded');
                    childrenContainer.classList.add('collapsed');
                } else {
                    toggleBtn.classList.add('expanded');
                    childrenContainer.classList.remove('collapsed');
                    childrenContainer.classList.add('expanded');
                }
            }
        }

        // Initialize the tree when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            const treeContainer = document.getElementById('treeRoot');
            new TreeRenderer(treeContainer, treeData);
        });

        // Additional utility functions for expanding/collapsing all nodes
        function expandAll() {
            document.querySelectorAll('.tree-toggle:not(.leaf)').forEach(btn => {
                btn.classList.add('expanded');
            });
            document.querySelectorAll('.tree-children').forEach(container => {
                container.classList.remove('collapsed');
                container.classList.add('expanded');
            });
        }

        function collapseAll() {
            document.querySelectorAll('.tree-toggle:not(.leaf)').forEach(btn => {
                btn.classList.remove('expanded');
            });
            document.querySelectorAll('.tree-children').forEach(container => {
                container.classList.remove('expanded');
                container.classList.add('collapsed');
            });
        }

        // Add buttons for expand/collapse all (optional)
        document.addEventListener('DOMContentLoaded', function() {
            const container = document.querySelector('.tree-container');
            
            const controlsDiv = document.createElement('div');
            controlsDiv.style.marginBottom = '15px';
            controlsDiv.style.textAlign = 'center';
            
            const expandBtn = document.createElement('button');
            expandBtn.textContent = 'Expand All';
            expandBtn.style.marginRight = '10px';
            expandBtn.style.padding = '8px 15px';
            expandBtn.style.border = '1px solid #ddd';
            expandBtn.style.borderRadius = '4px';
            expandBtn.style.backgroundColor = '#f9f9f9';
            expandBtn.style.cursor = 'pointer';
            expandBtn.onclick = expandAll;
            
            const collapseBtn = document.createElement('button');
            collapseBtn.textContent = 'Collapse All';
            collapseBtn.style.padding = '8px 15px';
            collapseBtn.style.border = '1px solid #ddd';
            collapseBtn.style.borderRadius = '4px';
            collapseBtn.style.backgroundColor = '#f9f9f9';
            collapseBtn.style.cursor = 'pointer';
            collapseBtn.onclick = collapseAll;
            
            controlsDiv.appendChild(expandBtn);
            controlsDiv.appendChild(collapseBtn);
            
            container.insertBefore(controlsDiv, container.firstChild);
        });
    </script>
</body>
</html>